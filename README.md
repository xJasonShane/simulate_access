# 网站访问模拟器

一个功能强大的网站访问模拟工具，用于测试和学习目的。

## 功能特性

### 核心功能

- ✅ 模拟访问指定网站或IP地址
- ✅ 可配置的随机访问间隔
- ✅ 访问次数限制
- ✅ 随机User-Agent模拟真实浏览器
- ✅ 防DDOS设计（单线程、最小间隔保护）
- ✅ 实时访问状态显示

### 增强功能

- ✅ 支持直接输入域名/IP（自动补全http://）
- ✅ 命令行参数配置
- ✅ 重试机制（可配置重试次数和延迟）
- ✅ 完整的日志记录
- ✅ 会话管理（提高性能）
- ✅ HTTP错误处理
- ✅ 成功率统计

## 环境要求

- Python 3.7+
- requests 库

## 安装依赖

```bash
pip install requests
```

## 使用方法

### 1. 交互式模式（推荐）

```bash
python main.py
```

程序会依次提示输入以下参数：

1. **目标URL或IP**: 要访问的网站地址（例如: <https://example.com> 或 example.com）
2. **最小访问间隔**: 访问之间的最小等待时间（秒，默认: 2）
3. **最大访问间隔**: 访问之间的最大等待时间（秒，默认: 5）
4. **访问次数**: 总共要访问的次数（默认: 10）
5. **请求超时时间**: 单次请求的超时时间（秒，默认: 10）
6. **重试次数**: 请求失败后重试次数（默认: 0）
7. **重试延迟**: 重试之间的等待时间（秒，默认: 1）

### 2. 命令行模式

```bash
python main.py --url https://example.com --min-interval 2 --max-interval 5 --count 10 --timeout 10 --retries 3 --retry-delay 1
```

#### 可用参数

| 参数 | 说明 | 示例 |
|------|------|------|
| --url | 目标URL或IP | --url <https://example.com> |
| --min-interval | 最小访问间隔（秒） | --min-interval 2 |
| --max-interval | 最大访问间隔（秒） | --max-interval 5 |
| --count | 访问次数 | --count 10 |
| --timeout | 请求超时时间（秒） | --timeout 10 |
| --retries | 重试次数 | --retries 3 |
| --retry-delay | 重试延迟（秒） | --retry-delay 1 |

### 示例

#### 交互式模式示例

```
请输入目标URL或IP (例如: https://example.com 或 example.com): example.com
请输入最小访问间隔(秒) [默认: 2]: 2
请输入最大访问间隔(秒) [默认: 5]: 5
请输入访问次数 [默认: 10]: 10
请输入请求超时时间(秒) [默认: 10]: 10
请输入重试次数(失败后重试次数，0表示不重试) [默认: 0]: 3
请输入重试延迟(秒) [默认: 1]: 1

配置确认:
  目标: http://example.com
  访问间隔: 2-5 秒
  访问次数: 10
  超时时间: 10 秒
  重试次数: 3
  重试延迟: 1 秒

确认开始访问? (y/n): y
```

#### 命令行模式示例

```bash
python main.py --url example.com --min-interval 2 --max-interval 5 --count 5
```

## 安全特性

- **单线程执行**: 避免高并发请求
- **最小间隔保护**: 默认最小间隔2秒
- **访问次数限制**: 防止无限循环
- **请求超时**: 10秒超时保护
- **优雅退出**: 支持Ctrl+C中断
- **重试限制**: 可配置最大重试次数

## 日志功能

程序会生成日志文件 `access_simulator.log`，包含以下信息：

- 访问时间
- 访问URL
- 等待时间
- 访问结果
- 错误信息（如果有）

日志格式：

```
2025-12-28 10:00:00 - __main__ - INFO - [1/10] 等待 3 秒后访问 http://example.com
2025-12-28 10:00:03 - __main__ - INFO - 成功 - 状态码: 200
```

## 文件结构

```
simulate_access/
├── README.md          # 使用说明
├── main.py            # 主程序入口（命令行+交互式）
├── config.py          # 配置管理
├── simulator.py       # 访问模拟器核心逻辑
├── constants.py       # 常量定义
└── access_simulator.log  # 日志文件（自动生成）
```

## 技术细节

- **HTTP客户端**: 使用 `requests` 库，支持会话管理
- **并发控制**: 单线程执行，避免高并发
- **错误处理**: 完整的异常捕获和重试机制
- **日志记录**: 使用Python标准库 `logging`
- **配置管理**: 灵活的配置系统，支持默认值

## 注意事项

⚠️ **重要提醒**:

1. 本工具仅用于学习和测试目的
2. 请勿用于未经授权的网站
3. 现代网站通常有反爬虫机制（验证码、IP限制等）
4. 简单的HTTP请求可能无法真正计入有效访问量
5. 使用前请确保遵守目标网站的服务条款
6. 频繁访问同一网站可能导致IP被暂时封禁

## 许可证

MIT License
